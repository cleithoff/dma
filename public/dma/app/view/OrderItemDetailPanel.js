/*
 * File: app/view/OrderItemDetailPanel.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.OrderItemDetailPanel', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.orderitemdetailpanel',

    itemId: 'OrderItemDetailPanel',
    layout: {
        type: 'border'
    },
    title: 'Detail',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            dockedItems: [
                {
                    xtype: 'toolbar',
                    dock: 'top',
                    itemId: 'OrderItemDetailToolbar',
                    items: [
                        {
                            xtype: 'button',
                            disabled: true,
                            itemId: 'OrderItemDetailEditButton',
                            text: 'Bearbeiten',
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemDetailEditButtonAfterRender,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            disabled: true,
                            itemId: 'OrderItemDetailSaveButton',
                            text: 'Speichern',
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemDetailSaveButtonAfterRender,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            disabled: true,
                            itemId: 'OrderItemDetailCancelButton',
                            text: 'Abbrechen',
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemDetailCancelButtonAfterRender,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            disabled: true,
                            itemId: 'OrderItemDetailDeleteButton',
                            text: 'LÃ¶schen',
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemDetailDeleteButtonAfterRender,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            itemId: 'OrderItemViewmodeButton',
                            text: 'Ansicht',
                            menu: {
                                xtype: 'menu',
                                itemId: 'OrderItemViewmodeMenu',
                                items: [
                                    {
                                        xtype: 'menucheckitem',
                                        value: '1',
                                        itemId: 'OrderItemViewmodePreviewFrontMenuItem',
                                        text: 'Preview Front',
                                        checked: true,
                                        group: 'viewmodegroup'
                                    },
                                    {
                                        xtype: 'menucheckitem',
                                        value: '2',
                                        suffix: '_preview_back',
                                        itemId: 'OrderItemViewmodePreviewBackMenuItem',
                                        text: 'Preview Back',
                                        group: 'viewmodegroup'
                                    },
                                    {
                                        xtype: 'menucheckitem',
                                        value: '3',
                                        suffix: '_print_front',
                                        itemId: 'OrderItemViewmodePrintFrontMenuItem',
                                        text: 'Print Front',
                                        group: 'viewmodegroup'
                                    },
                                    {
                                        xtype: 'menucheckitem',
                                        value: '4',
                                        suffix: '_print_back',
                                        itemId: 'OrderItemViewmodePrintBackMenuItem',
                                        text: 'Print Back',
                                        group: 'viewmodegroup'
                                    },
                                    {
                                        xtype: 'menucheckitem',
                                        value: '5',
                                        suffix: '_test_front',
                                        itemId: 'OrderItemViewmodeTestFrontMenuItem',
                                        text: 'Test Front',
                                        group: 'viewmodegroup'
                                    },
                                    {
                                        xtype: 'menucheckitem',
                                        value: '6',
                                        suffix: '_test_back',
                                        itemId: 'OrderItemViewmodeTestBackMenuItem',
                                        text: 'Test Back',
                                        group: 'viewmodegroup'
                                    }
                                ]
                            },
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemViewmodeButtonAfterRender,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            itemId: 'OrderItemDetailRefreshButton',
                            text: 'PDF Erzeugen',
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemDetailRefreshButtonAfterRender,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'button',
                            hidden: true,
                            itemId: 'OrderItemDetailPreviewButton',
                            text: 'Preview'
                        },
                        {
                            xtype: 'button',
                            itemId: 'OrderItemDetailSendButton',
                            text: 'Versenden',
                            listeners: {
                                afterrender: {
                                    fn: me.onOrderItemDetailSendButtonAfterRender,
                                    scope: me
                                }
                            }
                        }
                    ]
                }
            ],
            items: [
                {
                    xtype: 'form',
                    region: 'north',
                    border: false,
                    disabled: true,
                    height: 74,
                    itemId: 'OrderItemDetailFormPanel',
                    bodyPadding: 10,
                    trackResetOnLoad: true,
                    items: [
                        {
                            xtype: 'combobox',
                            anchor: '100%',
                            itemId: 'OrderItemDetailOrderitemState',
                            fieldLabel: 'Status',
                            name: 'order_itemstate_id',
                            displayField: 'title',
                            store: 'OrderItemstateJsonStore',
                            valueField: 'id'
                        },
                        {
                            xtype: 'fieldcontainer',
                            height: 120,
                            layout: {
                                align: 'stretch',
                                type: 'hbox'
                            },
                            fieldLabel: 'PDF erzeugen abschalten',
                            items: [
                                {
                                    xtype: 'checkboxfield',
                                    margins: '0 20 0 0',
                                    name: 'locked_render_front_preview',
                                    boxLabel: 'Preview Front'
                                },
                                {
                                    xtype: 'checkboxfield',
                                    margins: '0 20 0 0',
                                    name: 'locked_render_back_preview',
                                    boxLabel: 'Preview Back'
                                },
                                {
                                    xtype: 'checkboxfield',
                                    margins: '0 20 0 0',
                                    name: 'locked_render_front_print',
                                    boxLabel: 'Print Front'
                                },
                                {
                                    xtype: 'checkboxfield',
                                    margins: '0 20 0 0',
                                    name: 'locked_render_back_print',
                                    boxLabel: 'Print Back'
                                },
                                {
                                    xtype: 'checkboxfield',
                                    margins: '0 20 0 0',
                                    name: 'locked_render_front_test',
                                    boxLabel: 'Test Front'
                                },
                                {
                                    xtype: 'checkboxfield',
                                    margins: '0 20 0 0',
                                    name: 'locked_render_back_test',
                                    boxLabel: 'Test Back'
                                }
                            ]
                        },
                        {
                            xtype: 'textareafield',
                            anchor: '100%',
                            hidden: true,
                            itemId: 'OrderItemDetailComment',
                            fieldLabel: 'Label',
                            name: 'comment'
                        }
                    ]
                },
                {
                    xtype: 'form',
                    region: 'north',
                    border: false,
                    height: 68,
                    bodyPadding: 10,
                    header: false,
                    title: 'My Form',
                    items: [
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            itemId: 'OrderItemPath',
                            fieldLabel: 'Pfad',
                            value: '/var/www/html/dma/dma/public/deploy',
                            readOnly: true
                        },
                        {
                            xtype: 'textfield',
                            anchor: '100%',
                            itemId: 'OrderItemFilename',
                            fieldLabel: 'Dateiname',
                            readOnly: true
                        }
                    ]
                },
                {
                    xtype: 'container',
                    region: 'center',
                    itemId: 'PreviewContainer'
                },
                {
                    xtype: 'panel',
                    region: 'east',
                    width: 320,
                    layout: {
                        type: 'border'
                    },
                    collapsed: false,
                    collapsible: true,
                    title: 'Logo',
                    items: [
                        {
                            xtype: 'form',
                            region: 'center',
                            itemId: 'LogoFormPanel',
                            bodyPadding: 10,
                            header: false,
                            title: 'Logo',
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    itemId: 'LogoToolbar',
                                    items: [
                                        {
                                            xtype: 'button',
                                            hidden: true,
                                            itemId: 'LogoEditButton',
                                            text: 'Bearbeiten'
                                        },
                                        {
                                            xtype: 'button',
                                            itemId: 'LogoSaveButton',
                                            text: 'Speichern',
                                            listeners: {
                                                click: {
                                                    fn: me.onLogoSaveButtonClick,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            hidden: true,
                                            itemId: 'LogoCancelButton',
                                            text: 'Abbrechen'
                                        }
                                    ]
                                }
                            ],
                            items: [
                                {
                                    xtype: 'textareafield',
                                    anchor: '100%',
                                    itemId: 'LogoCommentTextfield',
                                    fieldLabel: 'Kommentar',
                                    name: 'logo_comment',
                                    grow: true,
                                    growMin: 48,
                                    rows: 1
                                }
                            ]
                        },
                        {
                            xtype: 'gridpanel',
                            collapseMode: 'header',
                            region: 'south',
                            split: true,
                            height: 480,
                            itemId: 'OrderItemstatelogGridPanel',
                            collapsible: false,
                            title: 'Log Status',
                            store: 'OrderItemstatelogJsonStore',
                            columns: [
                                {
                                    xtype: 'datecolumn',
                                    width: 120,
                                    defaultWidth: 120,
                                    dataIndex: 'datetime',
                                    text: 'Zeitpunkt',
                                    format: 'Y-m-d H:i:s'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                        return record.data.fk_order_itemstate.title;
                                    },
                                    width: 120,
                                    defaultWidth: 120,
                                    dataIndex: 'fk_order_itemstate',
                                    text: 'Status'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'comment',
                                    text: 'Kommentar',
                                    flex: 1
                                }
                            ],
                            dockedItems: [
                                {
                                    xtype: 'form',
                                    dock: 'bottom',
                                    itemId: 'OrderItemstatelogFormPanel',
                                    width: 100,
                                    bodyPadding: 10,
                                    title: 'Log Detail',
                                    items: [
                                        {
                                            xtype: 'datefield',
                                            anchor: '100%',
                                            fieldLabel: 'Zeitpunkt',
                                            name: 'datetime',
                                            readOnly: true,
                                            format: 'Y-m-d H:i:s'
                                        },
                                        {
                                            xtype: 'textareafield',
                                            anchor: '100%',
                                            fieldLabel: 'Kommentar',
                                            name: 'comment',
                                            readOnly: true,
                                            rows: 8
                                        }
                                    ]
                                },
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'bottom',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'OrderItemstatelogJsonStore'
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onOrderItemDetailEditButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.UPDATE));
    },

    onOrderItemDetailSaveButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.UPDATE));
    },

    onOrderItemDetailCancelButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.CREATE | MyApp.app.getRuleControllerController().rights.UPDATE));
    },

    onOrderItemDetailDeleteButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.DELETE));
    },

    onOrderItemViewmodeButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.READ));
    },

    onOrderItemDetailRefreshButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.EXECUTE));
    },

    onOrderItemDetailSendButtonAfterRender: function(component, eOpts) {
        component.setVisible(MyApp.app.getRuleControllerController().allow('OrderItemDetailPanel', MyApp.app.getRuleControllerController().rights.RELEASE));
    },

    onLogoSaveButtonClick: function(button, e, eOpts) {
        button.up('#LogoFormPanel').getForm().updateRecord();
        var record = button.up('#LogoFormPanel').getForm().getRecord();
        record.save();
    }

});